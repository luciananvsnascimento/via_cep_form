<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Formulário de endereço</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <form action="/form" method="post">
        <div class="form-group">
            <label for="cep">CEP</label>
            <input type="text" class="form-control" id="cep" name="cep" placeholder="">
        </div>
        <div class="form-group">
            <label for="logradouro">Logradouro</label>
            <input type="text" class="form-control" id="logradouro" name="logradouro" placeholder="">
        </div>
        <div class="form-group">
            <label for="complemento">Complemento</label>
            <input type="text" class="form-control" id="complemento" name="complemento" placeholder="">
        </div>
        <div class="form-group">
            <label for="bairro">Bairro</label>
            <input type="text" class="form-control" id="bairro" name="bairro" placeholder="">
        </div>
        <div class="form-group">
            <label for="localidade">Localidade</label>
            <input type="text" class="form-control" id="localidade" name="localidade" placeholder="">
        </div>
        <div class="form-group">
            <label for="uf">UF</label>
            <input type="text" class="form-control" id="uf" name="uf" placeholder="">
        </div>
        <div class="form-group">
            <label for="ibge">IBGE</label>
            <input type="text" class="form-control" id="ibge" name="ibge" placeholder="">
        </div>
        <div class="form-group">
            <label for="gia">GIA</label>
            <input type="text" class="form-control" id="gia" name="gia" placeholder="">
        </div>
        <div class="form-group">
            <label for="ddd">DDD</label>
            <input type="text" class="form-control" id="ddd" name="ddd" placeholder="">
        </div>
        <div class="form-group">
            <label for="siafi">SIAFI</label>
            <input type="text" class="form-control" id="siafi" name="siafi" placeholder="">
        </div>
        <button type="submit" class="btn btn-primary">Enviar</button>
    </form>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            $("#cep").blur(function () {
                var cep = $(this).val().replace(/\D/g, '');

                if (cep.length === 8) {
                    $.getJSON('https://viacep.com.br/ws/' + cep + '/json/', function (data) {
                        if (!("erro" in data)) {
                            $("#logradouro").val(data.logradouro);
                            $("#complemento").val(data.complemento);
                            $("#bairro").val(data.bairro);
                            $("#localidade").val(data.localidade);
                            $("#uf").val(data.uf);
                            $("#ibge").val(data.ibge);
                            $("#gia").val(data.gia);
                            $("#ddd").val(data.ddd);
                            $("#siafi").val(data.siafi);
                        }
                    });
                }
            });
        });
    </script>
</body>
</html>
